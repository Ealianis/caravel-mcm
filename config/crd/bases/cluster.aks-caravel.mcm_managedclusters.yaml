
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.7.0
  creationTimestamp: null
  name: managedclusters.cluster.aks-caravel.mcm
spec:
  group: cluster.aks-caravel.mcm
  names:
    kind: ManagedCluster
    listKind: ManagedClusterList
    plural: managedclusters
    singular: managedcluster
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: ManagedCluster is the Schema for the managedclusters API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          lease:
            description: MemberClusterLease is the Schema for the memberclusterleases
              API
            properties:
              apiVersion:
                description: 'APIVersion defines the versioned schema of this representation
                  of an object. Servers should convert recognized schemas to the latest
                  internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
                type: string
              kind:
                description: 'Kind is a string value representing the REST resource
                  this object represents. Servers may infer this from the endpoint
                  the client submits requests to. Cannot be updated. In CamelCase.
                  More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                type: string
              metadata:
                type: object
              spec:
                description: MemberClusterLeaseSpec defines the desired state of MemberClusterLease
                properties:
                  fleetID:
                    description: the unique ID of the fleet this member cluster belongs
                      to
                    type: string
                  lastJoinTime:
                    description: LastJoinTime is the last time the hub cluster controller
                      re-establish connection to the member cluster
                    format: date-time
                    type: string
                  lastLeaseRenewTime:
                    description: LastLeaseRenewTime is the last time the hub cluster
                      controller can reach the member cluster
                    format: date-time
                    type: string
                required:
                - fleetID
                - lastJoinTime
                - lastLeaseRenewTime
                type: object
              status:
                description: MemberClusterLeaseStatus defines the observed state of
                  MemberClusterLease
                type: object
            type: object
          metadata:
            type: object
          spec:
            description: ManagedClusterSpec defines the desired state of ManagedCluster
            properties:
              leaseDurationSeconds:
                default: 60
                description: LeaseDurationSeconds is used to coordinate the lease
                  update time of Klusterlet agents on the managed cluster. If its
                  value is zero, the Klusterlet agent will update its lease every
                  60 seconds by default
                format: int32
                type: integer
              managedClusterClientConfigs:
                description: ManagedClusterClientConfigs represents a list of the
                  apiserver address of the managed cluster. If it is empty, the managed
                  cluster has no accessible address for the hub to connect with it.
                items:
                  description: ClientConfig represents the apiserver address of the
                    managed cluster.
                  properties:
                    caBundle:
                      description: CABundle is the ca bundle to connect to apiserver
                        of the managed cluster. System certs are used if it is not
                        set.
                      format: byte
                      type: string
                    secretRef:
                      description: SecretRef This will make sure that the secret we
                        are looking at is a correct [Secret]
                      type: string
                    url:
                      description: URL is the URL of apiserver endpoint of the managed
                        cluster.
                      type: string
                  required:
                  - secretRef
                  - url
                  type: object
                type: array
              taints:
                description: Taints is a property of managed cluster that allow the
                  cluster to be repelled when scheduling. Taints, including 'ManagedClusterUnavailable'
                  and 'ManagedClusterUnreachable', can not be added/removed by agent
                  running on the managed cluster; while it's fine to add/remove other
                  taints from either hub cluser or managed cluster.
                items:
                  description: The managed cluster this Taint is attached to has the
                    "effect" on any placement that does not tolerate the Taint.
                  properties:
                    effect:
                      description: Effect indicates the effect of the taint on placements
                        that do not tolerate the taint. Valid effects are NoSelect,
                        PreferNoSelect and NoSelectIfNew.
                      enum:
                      - NoSelect
                      - PreferNoSelect
                      - NoSelectIfNew
                      type: string
                    key:
                      description: Key is the taint key applied to a cluster. e.g.
                        bar or foo.example.com/bar. The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                    timeAdded:
                      description: TimeAdded represents the time at which the taint
                        was added.
                      format: date-time
                      nullable: true
                      type: string
                    value:
                      description: Value is the taint value corresponding to the taint
                        key.
                      maxLength: 1024
                      type: string
                  required:
                  - effect
                  - key
                  - timeAdded
                  type: object
                type: array
            type: object
          status:
            description: ManagedClusterStatus represents the current status of joined
              managed cluster.
            properties:
              allocatable:
                additionalProperties:
                  anyOf:
                  - type: integer
                  - type: string
                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                  x-kubernetes-int-or-string: true
                description: Allocatable represents the total allocatable resources
                  on the managed cluster.
                type: object
              capacity:
                additionalProperties:
                  anyOf:
                  - type: integer
                  - type: string
                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                  x-kubernetes-int-or-string: true
                description: Capacity represents the total resource capacity from
                  all nodeStatuses on the managed cluster.
                type: object
              clusterClaims:
                description: ClusterClaims represents cluster information that a managed
                  cluster claims, for example a unique cluster identifier (id.k8s.io)
                  and kubernetes version (kubeversion.aks-caravel.mcm). They are written
                  from the managed cluster. The set of claims is not uniform across
                  a fleet, some claims can be vendor or version specific and may not
                  be included from all managed clusters.
                items:
                  description: ManagedClusterClaim represents a ClusterClaim collected
                    from a managed cluster.
                  properties:
                    name:
                      description: Name is the name of a ClusterClaim resource on
                        managed cluster. It's a well known or customized name to identify
                        the claim.
                      maxLength: 253
                      minLength: 1
                      type: string
                    value:
                      description: Value is a claim-dependent string
                      maxLength: 1024
                      minLength: 1
                      type: string
                  type: object
                type: array
              conditions:
                description: Conditions contains the different condition statuses
                  for this managed cluster.
                items:
                  description: NodeCondition contains condition information for a
                    node.
                  properties:
                    lastHeartbeatTime:
                      description: Last time we got an update on a given condition.
                      format: date-time
                      type: string
                    lastTransitionTime:
                      description: Last time the condition transit from one status
                        to another.
                      format: date-time
                      type: string
                    message:
                      description: Human readable message indicating details about
                        last transition.
                      type: string
                    reason:
                      description: (brief) reason for the condition's last transition.
                      type: string
                    status:
                      description: Status of the condition, one of True, False, Unknown.
                      type: string
                    type:
                      description: Type of node condition.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              version:
                description: Version represents the kubernetes version of the managed
                  cluster.
                properties:
                  kubernetes:
                    description: Kubernetes is the kubernetes version of managed cluster.
                    type: string
                type: object
            required:
            - conditions
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
